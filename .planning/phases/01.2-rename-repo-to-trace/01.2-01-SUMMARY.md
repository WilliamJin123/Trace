---
phase: 01.2
plan: 01
subsystem: sdk-api
tags: [rename, refactor, tract, tract-id]
dependency-graph:
  requires: [01-03, 01.1-01, 01.1-02]
  provides: [Tract-class, tract-id-field, TractConfig]
  affects: [02-01, 02-02, 03-01, 03-02, 03-03, 03-04, 04-01, 04-02, 05-01, 05-02, 05-03]
tech-stack:
  added: []
  patterns: []
key-files:
  created: [src/tract/tract.py, tests/test_tract.py]
  modified:
    - src/tract/__init__.py
    - src/tract/models/__init__.py
    - src/tract/models/config.py
    - src/tract/models/commit.py
    - src/tract/models/annotations.py
    - src/tract/protocols.py
    - src/tract/engine/commit.py
    - src/tract/engine/compiler.py
    - src/tract/storage/schema.py
    - src/tract/storage/repositories.py
    - src/tract/storage/sqlite.py
    - tests/conftest.py
    - tests/test_engine/test_commit.py
    - tests/test_engine/test_compiler.py
    - tests/test_storage/test_repositories.py
    - tests/test_storage/test_schema.py
  deleted: [src/tract/repo.py, tests/test_repo.py]
decisions:
  - id: 01.2-01-D1
    description: "Repo -> Tract, repo_id -> tract_id, RepoConfig -> TractConfig across all source and tests"
metrics:
  duration: 3m
  completed: 2026-02-11
---

# Phase 1.2 Plan 01: Repo -> Tract Rename Summary

Mechanical rename of the public SDK class from Repo to Tract, with repo_id -> tract_id and RepoConfig -> TractConfig across all 18 source and test files. All 220 tests pass unchanged.

## What Was Done

### Task 1: Rename Repo to Tract in all source and test files
- File renames via `git mv`: `repo.py` -> `tract.py`, `test_repo.py` -> `test_tract.py`
- Class rename: `class Repo` -> `class Tract` in tract.py
- Field rename: `repo_id` -> `tract_id` in CommitInfo, PriorityAnnotation, CommitRow, RefRow, AnnotationRow
- Config rename: `RepoConfig` -> `TractConfig` in config.py and all imports/usages
- Protocol rename: `repo_id` -> `tract_id` in ContextCompiler.compile() signature
- Engine rename: `repo_id` -> `tract_id` in CommitEngine constructor and all internal references
- Storage rename: `repo_id` -> `tract_id` in all repository ABCs and SQLite implementations
- Schema rename: column `repo_id` -> `tract_id` in CommitRow, RefRow, AnnotationRow
- Index rename: `ix_commits_repo_time` -> `ix_commits_tract_time`, `ix_commits_repo_type` -> `ix_commits_tract_type`
- Import update: `from tract.repo import Repo` -> `from tract.tract import Tract`
- Test fixture rename: `sample_repo_id` -> `sample_tract_id`
- Test string literals updated: `"test-repo"` -> `"test-tract"`, `"my-repo"` -> `"my-tract"`, etc.
- Commit: `56e0c8d`

### Task 2: Update planning docs and MEMORY.md
- MEMORY.md: Updated terminology section, added Phase 1.2 status, updated file structure
- STATE.md: Updated current position, added decision entry, added Phase 1.2 stats
- ROADMAP.md: Updated success criteria references, marked Phase 1.2 plan complete
- Commit: `65741a6`

## Decisions Made

| ID | Decision | Rationale |
|----|----------|-----------|
| 01.2-01-D1 | Rename Repo -> Tract, repo_id -> tract_id, RepoConfig -> TractConfig | Repo implies shared container; Tract aligns with package name for clean `from tract import Tract` API |

## Deviations from Plan

None -- plan executed exactly as written.

## Verification Results

1. `python -m pytest tests/ -x -q` -- **220 passed** in 3.16s
2. `python -c "from tract import Tract, TractConfig"` -- imports succeed
3. `grep -rw "class Repo" src/tract/` -- 0 matches
4. `grep -rw "repo_id" src/tract/ tests/` -- 0 matches (excluding storage repository pattern names)
5. `grep -rw "RepoConfig" src/tract/ tests/` -- 0 matches
6. `src/tract/repo.py` and `tests/test_repo.py` no longer exist
7. `src/tract/tract.py` and `tests/test_tract.py` exist
8. No accidental `tract` -> `trace` renames from external linter

## Next Phase Readiness

Phase 2 (Linear History & CLI) can proceed immediately. All source and test files use the new Tract/tract_id/TractConfig vocabulary. No blockers.
